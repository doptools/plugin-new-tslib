"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.findPackageRoot = exports.findProjectRoot = void 0;
const tslib_1 = require("tslib");
const fs_1 = require("fs");
const path_1 = tslib_1.__importDefault(require("path"));
const resolve_package_path_1 = require("resolve-package-path");
function findProjectRoot(releativeTo = process.cwd()) {
    releativeTo = path_1.default.resolve(releativeTo);
    const root = path_1.default.resolve('/');
    while (true) {
        const fpath = path_1.default.join(releativeTo, 'dops.project.json');
        if (fs_1.existsSync(fpath)) {
            return releativeTo;
        }
        if (releativeTo === root) {
            return null;
        }
        releativeTo = path_1.default.dirname(releativeTo);
    }
}
exports.findProjectRoot = findProjectRoot;
function findPackageRoot(releativeTo = process.cwd()) {
    const path = resolve_package_path_1.findUpPackagePath(releativeTo, true);
    return path !== null ? path_1.default.dirname(path) : null;
}
exports.findPackageRoot = findPackageRoot;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvamVjdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlsL3Byb2plY3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUNBLDJCQUFnQztBQUNoQyx3REFBd0I7QUFDeEIsK0RBQXNEO0FBRXRELFNBQWdCLGVBQWUsQ0FBQyxjQUFzQixPQUFPLENBQUMsR0FBRyxFQUFFO0lBQy9ELFdBQVcsR0FBRyxjQUFJLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0lBQ3hDLE1BQU0sSUFBSSxHQUFHLGNBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDL0IsT0FBTyxJQUFJLEVBQUU7UUFDVCxNQUFNLEtBQUssR0FBRyxjQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxtQkFBbUIsQ0FBQyxDQUFDO1FBQzFELElBQUcsZUFBVSxDQUFDLEtBQUssQ0FBQyxFQUFDO1lBQ2pCLE9BQU8sV0FBVyxDQUFDO1NBQ3RCO1FBQ0QsSUFBRyxXQUFXLEtBQUssSUFBSSxFQUFDO1lBQ3BCLE9BQU8sSUFBSSxDQUFDO1NBQ2Y7UUFDRCxXQUFXLEdBQUcsY0FBSSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQztLQUMzQztBQUNMLENBQUM7QUFiRCwwQ0FhQztBQUVELFNBQWdCLGVBQWUsQ0FBQyxjQUFzQixPQUFPLENBQUMsR0FBRyxFQUFFO0lBQy9ELE1BQU0sSUFBSSxHQUFHLHdDQUFpQixDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUNsRCxPQUFPLElBQUksS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDLGNBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztBQUNyRCxDQUFDO0FBSEQsMENBR0MifQ==