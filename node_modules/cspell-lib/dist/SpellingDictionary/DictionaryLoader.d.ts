import { SpellingDictionary } from './SpellingDictionary';
import { ReplaceMap } from '@cspell/cspell-types';
export interface LoadOptions {
    /**
     * Optional name of the dictionary.
     */
    name?: string;
    /**
     * Type of file:
     *  S - single word per line,
     *  C - each line is treated like code (Camel Case is allowed)
     * Default is C
     * C is the slowest to load due to the need to split each line based upon code splitting rules.
     */
    type?: LoaderType;
    /** Replacement Map */
    repMap?: ReplaceMap;
    /** Use Compounds */
    useCompounds?: boolean;
}
export declare type LoaderType = keyof Loaders;
export declare type Loader = (filename: string, options: LoadOptions) => Promise<SpellingDictionary>;
export interface Loaders {
    S: Loader;
    C: Loader;
    T: Loader;
    default: Loader;
    [index: string]: Loader | undefined;
}
interface CacheEntry {
    uri: string;
    options: LoadOptions;
    ts: number;
    state: Promise<Stats | Error>;
    dictionary: Promise<SpellingDictionary>;
}
export declare function loadDictionary(uri: string, options: LoadOptions): Promise<SpellingDictionary>;
export declare function refreshCacheEntries(maxAge?: number, now?: number): Promise<void>;
declare function refreshEntry(entry: CacheEntry, maxAge: number, now: number): Promise<void>;
declare function loadEntry(uri: string, options: LoadOptions, now?: number): CacheEntry;
declare function load(uri: string, options: LoadOptions): Promise<SpellingDictionary>;
export declare const testing: {
    dictionaryCache: Map<string, CacheEntry>;
    refreshEntry: typeof refreshEntry;
    loadEntry: typeof loadEntry;
    load: typeof load;
};
/**
 * Copied from the Node definition to avoid a dependency upon a specific version of Node
 */
interface StatsBase<T> {
    isFile(): boolean;
    isDirectory(): boolean;
    isBlockDevice(): boolean;
    isCharacterDevice(): boolean;
    isSymbolicLink(): boolean;
    isFIFO(): boolean;
    isSocket(): boolean;
    dev: T;
    ino: T;
    mode: T;
    nlink: T;
    uid: T;
    gid: T;
    rdev: T;
    size: T;
    blksize: T;
    blocks: T;
    atimeMs: T;
    mtimeMs: T;
    ctimeMs: T;
    birthtimeMs: T;
    atime: Date;
    mtime: Date;
    ctime: Date;
    birthtime: Date;
}
export declare type Stats = StatsBase<number>;
export {};
